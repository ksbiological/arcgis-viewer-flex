Viewer development
==================

The viewer is currently developed on ``Yorktown``, the Windows machine used by the developer.

The viewer's files are a version-controlled folder at ``D:\code\flexviewer\``.

Widgets
-------

ESRI's ArcGIS Viewer for Flex 3.0 uses *widgets* (aka tools, features) to provide functionality in their viewer (read their viewer's documentation for more on that.) KBS' version uses many of the included widgets without modification, and some that have been modified to meet the Survey's specifications. KBS' viewer also utilizes third-party widgets and a custom widgets built from scratch.

How to add a widget
^^^^^^^^^^^^^^^^^^^

1. Copy the widget source code into the "src/widgets" directory of the source code.
2. In Flash Builder 4.5, go to "Project > Properties > Flex modules" and add the new widget's .mxml file to the list of modules.
3. Export a new release build of the viewer by clicking "Project > Export Release Build".
4. Add the widget into the application configuration XML for whatever web map you are trying to add the widget to. Refer to `ESRI's documentation <http://help.arcgis.com/en/webapps/flexviewer/help/01m3/01m300000018000000.htm>` for more details.

PLSS Summary Widget
^^^^^^^^^^^^^^^^^^^

The PLSS Summary widget is a custom tool allowing the quick creation of a printable data table of some of the information in the Natural Resource Planner.

The tool is activated by clicking on the appropriate icon in the widget bar. A user selects one of the shape selection options and selects a polygon. As soon as the polygon is complete, the draw tool turns off and the Flex application queries the Natural Resource Planner service for the IDs of all of the selected PLSS sections. It then automatically opens a new browser window on the user's computer. The page which loads is generated by the KBS website. It is passed a list of the IDs in the POST section of the HTTP request. The KBS website then queries the service again, using the IDs as arguments, to retrieve the desired fields. It puts the results in a table and renders a printer-friendly page the to the user.

The user may repeat this process. The tool automatically removes the previous polygon when the draw tool of the widget is reactivated. Closing the widget will temporarily remove the polygon from the display; minimizing it will leave it there.

There are no testing features currently in place.
